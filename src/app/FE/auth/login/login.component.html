<div class="login-container">
  <div class="login-wrapper">
    <!-- Left Panel - Login Form -->
    <div class="login-left-panel">
      <div class="login-content">
        <div class="login-header">
          <h2>Đăng nhập</h2>
          <p class="login-subtitle">
            Đăng nhập thông tin tài khoản của bạn
          </p>
        </div>
        
        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">
          <div class="form-field">
            <label for="username">Tên đăng nhập</label>
            <input 
              id="username"
              type="text" 
              formControlName="username"
              placeholder="Tên đăng nhập"
              class="form-input"
              (keydown.enter)="focusPassword()"
            />
          </div>
          
          <div class="form-field">
            <label for="password">Mật khẩu</label>
            <input 
              id="password"
              type="password" 
              formControlName="password"
              placeholder="Nhập mật khẩu"
              class="form-input"
              (keydown.enter)="onSubmit()"
            />
          </div>
          
          <div class="error-message" *ngIf="errorMessage">
            {{ errorMessage }}
          </div>
          
          <button 
            type="submit" 
            class="login-button"
            [disabled]="submitting || !loginForm.valid">
            <span *ngIf="submitting" class="spinner"></span>
            Đăng nhập
          </button>
          
          <!-- Register button -->
          <button 
            type="button" 
            class="register-button"
            (click)="showRegisterForm()"
            style="margin-top: 10px; background: #27ae60; width: 100%; padding: 12px; border: none; border-radius: 6px; color: white; cursor: pointer;">
            Đăng ký tài khoản mới
          </button>
        </form>

        <!-- Register Form (hidden by default) -->
        <form [formGroup]="registerForm" (ngSubmit)="onRegister()" class="register-form" *ngIf="showRegister" style="margin-top: 20px;">
          <div class="register-header">
            <h3>Đăng ký tài khoản mới</h3>
            <p>Tạo tài khoản Phó Hiệu trưởng</p>
          </div>

          <div class="form-field">
            <label for="regUsername">Tên đăng nhập</label>
            <input 
              id="regUsername"
              type="text" 
              formControlName="username"
              placeholder="Tên đăng nhập"
              class="form-input"
            />
            <div class="field-error" *ngIf="registerForm.get('username')?.errors?.['required'] && registerForm.get('username')?.touched">
              Tên đăng nhập không được để trống
            </div>
          </div>

          <div class="form-field">
            <label for="regPassword">Mật khẩu</label>
            <input 
              id="regPassword"
              type="password" 
              formControlName="password"
              placeholder="Mật khẩu"
              class="form-input"
            />
            <div class="field-error" *ngIf="registerForm.get('password')?.errors?.['required'] && registerForm.get('password')?.touched">
              Mật khẩu không được để trống
            </div>
          </div>

          <div class="form-field">
            <label for="regFullName">Họ và tên</label>
            <input 
              id="regFullName"
              type="text" 
              formControlName="fullName"
              placeholder="Họ và tên đầy đủ"
              class="form-input"
            />
            <div class="field-error" *ngIf="registerForm.get('fullName')?.errors?.['required'] && registerForm.get('fullName')?.touched">
              Họ và tên không được để trống
            </div>
          </div>

          <div class="form-field">
            <label for="regEmail">Email *</label>
            <input 
              id="regEmail"
              type="email" 
              formControlName="email"
              placeholder="Nhập email đúng định dạng (vd: name@gmail.com)"
              class="form-input"
            />
            <div class="error-message" *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
              <span *ngIf="registerForm.get('email')?.errors?.['required']">Email không được để trống</span>
              <span *ngIf="registerForm.get('email')?.errors?.['email']">Email không đúng định dạng</span>
            </div>
          </div>

          <div class="error-message" *ngIf="registerErrorMessage">
            {{ registerErrorMessage }}
          </div>

          <div class="success-message" *ngIf="registerSuccessMessage" style="color: #27ae60; margin: 10px 0; text-align: center;">
            {{ registerSuccessMessage }}
          </div>

          <!-- Debug info -->
          <div style="font-size: 12px; color: #666; margin: 10px 0;" *ngIf="!registerForm.valid">
            Vui lòng điền đầy đủ thông tin:
            <ul style="margin: 5px 0; padding-left: 20px;">
              <li *ngIf="registerForm.get('username')?.errors">Tên đăng nhập</li>
              <li *ngIf="registerForm.get('password')?.errors">Mật khẩu</li>
              <li *ngIf="registerForm.get('fullName')?.errors">Họ và tên</li>
            </ul>
          </div>

          <button 
            type="submit" 
            class="register-submit-button"
            [disabled]="registerSubmitting || !registerForm.valid"
            style="background: #27ae60; width: 100%; padding: 12px; border: none; border-radius: 6px; color: white; cursor: pointer; margin-bottom: 10px;">
            <span *ngIf="registerSubmitting" class="spinner"></span>
            Đăng ký
          </button>

          <button 
            type="button" 
            class="cancel-register-button"
            (click)="hideRegisterForm()"
            style="background: #95a5a6; width: 100%; padding: 12px; border: none; border-radius: 6px; color: white; cursor: pointer;">
            Hủy
          </button>
        </form>
      </div>
    </div>
    
    <!-- Right Panel - University Logo -->
    <div class="login-right-panel">
      <div class="logo-container">
        <img 
          src="assets/images/logo-dhxd.png" 
          alt="University Logo" 
          class="university-logo"
        />
      </div>
    </div>
  </div>
</div>